consumes:
  - application/json
info:
  description: go-smart-home is a Go + react based app  application for managing your smart home environment.
    The REST API is generated by Swagger, using  a Raspberry with https://github.com/stianeikeland/go-rpio as
    IoT Gateway + Integration Hub
  title: go-smart-home
  version: 0.0.1
produces:
  - application/json
schemes:
  - http
swagger: "2.0"
basePath: "/api"

definitions:
  Switch:
    type: object
    required:
      - description
    properties:
      id:
        type: integer
        format: int64
      description:
        type: string
        minLength: 1
      status:
        type: integer
        format: int32

paths:
  /switches:
    get:
      tags:
        - "switch"
      operationId: "listSwitches"
      responses:
        200:
          description: "list all switches"
          schema:
            type: array
            items:
              $ref: "#/definitions/Switch"
  /switch:
    post:
      tags:
        - "switch"
      operationId: "addSwitch"
      summary: "Create a new switch"
      consumes:
        - "application/json"
        - "application/xml"
      produces:
        - "application/xml"
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          description: "Switch object that needs to be added to your home"
          required: true
          schema:
            $ref: "#/definitions/Switch"
      responses:
        200:
          description: "successful operation"
          schema:
            $ref: "#/definitions/Switch"
        405:
          description: "Invalid input - validation exception"
        500:
          description: "Internal server error"
          schema:
            type: "string"
    put:
      tags:
        - "switch"
      operationId: "updateSwitch"
      summary: "Update an existing switch"
      consumes:
        - "application/json"
        - "application/xml"
      produces:
        - "application/xml"
        - "application/json"
      parameters:
        - in: "body"
          name: "body"
          description: "Switch object that needs to be updated"
          required: true
          schema:
            $ref: "#/definitions/Switch"
      responses:
        400:
          description: "Invalid ID supplied"
        404:
          description: "Switch not found"
        405:
          description: "Invalid input - validation exception"

  /switch/{switchId}:
    get:
      tags:
        - "switch"
      summary: "Find switch by ID"
      description: "Returns a single switch"
      operationId: "getSwitchById"
      produces:
        - "application/xml"
        - "application/json"
      parameters:
        - name: "switchId"
          in: "path"
          description: "ID of switch to return"
          required: true
          type: "integer"
          format: "int64"
      responses:
        200:
          description: "successful operation"
          schema:
            $ref: "#/definitions/Switch"
        400:
          description: "Invalid ID supplied"
        404:
          description: "Switch not found"

  /switch/{switchId}/state:
    get:
      tags:
        - "switch"
      operationId: "getSwitchState"
      summary: "Get a switch state"
      produces:
        - "application/xml"
        - "application/json"
        - "text/plain"
      parameters:
        - name: "switchId"
          in: "path"
          description: "ID of switch to get state"
          required: true
          type: "integer"
          format: "int64"
      responses:
        200:
          description: "successful operation"
          schema:
            type: integer
            format: int32
        400:
          description: "Invalid ID supplied"
        404:
          description: "Switch not found"
    put:
      tags:
        - "switch"
      operationId: "setSwitchState"
      summary: "Set a switch state"
      produces:
        - "application/xml"
        - "application/json"
      parameters:
        - name: "switchId"
          in: "path"
          description: "ID of switch to set state"
          required: true
          type: "integer"
          format: "int64"
      responses:
        200:
          description: "successful operation"
          schema:
            $ref: "#/definitions/Switch"
        400:
          description: "Invalid ID supplied"
        404:
          description: "Switch not found"

  /switch/{switchId}/actions/toggle:
    post:
      tags:
        - "switch"
      operationId: "toggleSwitchState"
      summary: "Toggle a switch state to MAX_STATE-$current_state"
      produces:
        - "application/xml"
        - "application/json"
      parameters:
        - name: "switchId"
          in: "path"
          description: "ID of switch to toggle state"
          required: true
          type: "integer"
          format: "int64"
      responses:
        200:
          description: "successful operation"
          schema:
            $ref: "#/definitions/Switch"
        400:
          description: "Invalid ID supplied"
        404:
          description: "Switch not found"
  /switch/{switchId}/actions/tap/{state}/{timeMs}:
    put:
      tags:
        - "switch"
      operationId: "tapSwitch"
      summary: "Tap on a switch for setting state for the selected period of time and reverting to the previous state afterwards"
      produces:
        - "application/xml"
        - "application/json"
      parameters:
        - name: "switchId"
          in: "path"
          description: "ID of switch to tap"
          required: true
          type: "integer"
          format: "int64"
        - name: "state"
          in: "path"
          description: "state of switch for the desired period"
          required: true
          type: "integer"
          format: "int32"
        - name: "timeMs"
          in: "path"
          description: "period for tapping in ms"
          required: true
          type: "integer"
          format: "int64"
      responses:
        200:
          description: "successful operation"
          schema:
            $ref: "#/definitions/Switch"
        400:
          description: "Invalid ID supplied"
        404:
          description: "Switch not found"